let DEBUG_MODE,ValidationError,CustomErrorHandler;_1ce‍.x([["default",()=>_1ce‍.o]]);_1ce‍.w("../config",[["DEBUG_MODE",["DEBUG_MODE"],function(v){DEBUG_MODE=v}]]);_1ce‍.w("joi",[["ValidationError",["ValidationError"],function(v){ValidationError=v}]]);_1ce‍.w("../services/CustomErrorHandler",[["default",["CustomErrorHandler"],function(v){CustomErrorHandler=v}]]);



const errorHandler=(err, req, res, next)=>{
    let statusCode = 500;
    let data = {
        message:"internal server error",
        ...(DEBUG_MODE==='true' && {originalError: err.message})
    }

    if(err instanceof ValidationError){
        statusCode = 422;
        data={
            message:err.message
        }
    }
    if(err instanceof CustomErrorHandler){
        statusCode=err.status;
        data ={
            message:err.message
        }
    }

    return res.status(statusCode).json(data);
}

_1ce‍.d(errorHandler);